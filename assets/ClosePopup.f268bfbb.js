import { j as exists, B as BaseAPI, J as JSONApiResponse, bq as RequiredError, br as TextApiResponse, aJ as createDirective, bs as getPortalProxy, bt as closePortals, aF as isKeyCode } from "./index.b87ff47c.js";
const PlaylistVisibility = {
  Public: "Public",
  Private: "Private",
  Unlisted: "Unlisted"
};
function PlaylistVisibilityFromJSON(json) {
  return PlaylistVisibilityFromJSONTyped(json);
}
function PlaylistVisibilityFromJSONTyped(json, ignoreDiscriminator) {
  return json;
}
function PlaylistVisibilityToJSON(value) {
  return value;
}
function PlaylistCreateRequestToJSON(value) {
  if (value === void 0) {
    return void 0;
  }
  if (value === null) {
    return null;
  }
  return {
    "name": value.name,
    "visibility": PlaylistVisibilityToJSON(value.visibility)
  };
}
function PlaylistItemReadDtoFromJSON(json) {
  return PlaylistItemReadDtoFromJSONTyped(json);
}
function PlaylistItemReadDtoFromJSONTyped(json, ignoreDiscriminator) {
  if (json === void 0 || json === null) {
    return json;
  }
  return {
    "trackId": !exists(json, "trackId") ? void 0 : json["trackId"],
    "index": !exists(json, "index") ? void 0 : json["index"],
    "timesPlayed": !exists(json, "timesPlayed") ? void 0 : json["timesPlayed"],
    "dateAdded": !exists(json, "dateAdded") ? void 0 : new Date(json["dateAdded"])
  };
}
function PlaylistTypeFromJSON(json) {
  return PlaylistTypeFromJSONTyped(json);
}
function PlaylistTypeFromJSONTyped(json, ignoreDiscriminator) {
  return json;
}
function PlaylistReadDtoFromJSON(json) {
  return PlaylistReadDtoFromJSONTyped(json);
}
function PlaylistReadDtoFromJSONTyped(json, ignoreDiscriminator) {
  if (json === void 0 || json === null) {
    return json;
  }
  return {
    "id": !exists(json, "id") ? void 0 : json["id"],
    "name": !exists(json, "name") ? void 0 : json["name"],
    "userId": !exists(json, "userId") ? void 0 : json["userId"],
    "username": !exists(json, "username") ? void 0 : json["username"],
    "visibility": !exists(json, "visibility") ? void 0 : PlaylistVisibilityFromJSON(json["visibility"]),
    "type": !exists(json, "type") ? void 0 : PlaylistTypeFromJSON(json["type"]),
    "lastModified": !exists(json, "lastModified") ? void 0 : new Date(json["lastModified"]),
    "numberOfTracks": !exists(json, "numberOfTracks") ? void 0 : json["numberOfTracks"],
    "tracks": !exists(json, "tracks") ? void 0 : json["tracks"] === null ? null : json["tracks"].map(PlaylistItemReadDtoFromJSON)
  };
}
class PlaylistApi extends BaseAPI {
  async createPlaylistRaw(requestParameters, initOverrides) {
    const queryParameters = {};
    const headerParameters = {};
    headerParameters["Content-Type"] = "application/json-patch+json";
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist`,
      method: "POST",
      headers: headerParameters,
      query: queryParameters,
      body: PlaylistCreateRequestToJSON(requestParameters.playlistCreateRequest)
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => PlaylistReadDtoFromJSON(jsonValue));
  }
  async createPlaylist(requestParameters = {}, initOverrides) {
    const response = await this.createPlaylistRaw(requestParameters, initOverrides);
    return await response.value();
  }
  async deletePlaylistRaw(requestParameters, initOverrides) {
    if (requestParameters.playlistId === null || requestParameters.playlistId === void 0) {
      throw new RequiredError("playlistId", "Required parameter requestParameters.playlistId was null or undefined when calling deletePlaylist.");
    }
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/{playlistId}`.replace(`{${"playlistId"}}`, encodeURIComponent(String(requestParameters.playlistId))),
      method: "DELETE",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new TextApiResponse(response);
  }
  async deletePlaylist(requestParameters, initOverrides) {
    const response = await this.deletePlaylistRaw(requestParameters, initOverrides);
    return await response.value();
  }
  async getCurrentUserFavoriteRaw(initOverrides) {
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/user/me/favorite`,
      method: "GET",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => jsonValue.map(PlaylistReadDtoFromJSON));
  }
  async getCurrentUserFavorite(initOverrides) {
    const response = await this.getCurrentUserFavoriteRaw(initOverrides);
    return await response.value();
  }
  async getCurrentUserHistoryRaw(initOverrides) {
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/user/me/history`,
      method: "GET",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => jsonValue.map(PlaylistReadDtoFromJSON));
  }
  async getCurrentUserHistory(initOverrides) {
    const response = await this.getCurrentUserHistoryRaw(initOverrides);
    return await response.value();
  }
  async getCurrentUserPlaylistRaw(initOverrides) {
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/user/me`,
      method: "GET",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => jsonValue.map(PlaylistReadDtoFromJSON));
  }
  async getCurrentUserPlaylist(initOverrides) {
    const response = await this.getCurrentUserPlaylistRaw(initOverrides);
    return await response.value();
  }
  async getCurrentUserQueueRaw(initOverrides) {
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/user/me/queue`,
      method: "GET",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => jsonValue.map(PlaylistReadDtoFromJSON));
  }
  async getCurrentUserQueue(initOverrides) {
    const response = await this.getCurrentUserQueueRaw(initOverrides);
    return await response.value();
  }
  async getPlaylistRaw(requestParameters, initOverrides) {
    if (requestParameters.playlistId === null || requestParameters.playlistId === void 0) {
      throw new RequiredError("playlistId", "Required parameter requestParameters.playlistId was null or undefined when calling getPlaylist.");
    }
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/{playlistId}`.replace(`{${"playlistId"}}`, encodeURIComponent(String(requestParameters.playlistId))),
      method: "GET",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => PlaylistReadDtoFromJSON(jsonValue));
  }
  async getPlaylist(requestParameters, initOverrides) {
    const response = await this.getPlaylistRaw(requestParameters, initOverrides);
    return await response.value();
  }
  async getUserPlaylistRaw(requestParameters, initOverrides) {
    if (requestParameters.userId === null || requestParameters.userId === void 0) {
      throw new RequiredError("userId", "Required parameter requestParameters.userId was null or undefined when calling getUserPlaylist.");
    }
    const queryParameters = {};
    const headerParameters = {};
    if (this.configuration && this.configuration.apiKey) {
      headerParameters["Authorization"] = this.configuration.apiKey("Authorization");
    }
    const response = await this.request({
      path: `/api/playlist/user/{userId}`.replace(`{${"userId"}}`, encodeURIComponent(String(requestParameters.userId))),
      method: "GET",
      headers: headerParameters,
      query: queryParameters
    }, initOverrides);
    return new JSONApiResponse(response, (jsonValue) => jsonValue.map(PlaylistReadDtoFromJSON));
  }
  async getUserPlaylist(requestParameters, initOverrides) {
    const response = await this.getUserPlaylistRaw(requestParameters, initOverrides);
    return await response.value();
  }
}
function getDepth(value) {
  if (value === false) {
    return 0;
  }
  if (value === true || value === void 0) {
    return 1;
  }
  const depth = parseInt(value, 10);
  return isNaN(depth) ? 0 : depth;
}
var ClosePopup = createDirective(
  {
    name: "close-popup",
    beforeMount(el, { value }) {
      const ctx = {
        depth: getDepth(value),
        handler(evt) {
          ctx.depth !== 0 && setTimeout(() => {
            const proxy = getPortalProxy(el);
            if (proxy !== void 0) {
              closePortals(proxy, evt, ctx.depth);
            }
          });
        },
        handlerKey(evt) {
          isKeyCode(evt, 13) === true && ctx.handler(evt);
        }
      };
      el.__qclosepopup = ctx;
      el.addEventListener("click", ctx.handler);
      el.addEventListener("keyup", ctx.handlerKey);
    },
    updated(el, { value, oldValue }) {
      if (value !== oldValue) {
        el.__qclosepopup.depth = getDepth(value);
      }
    },
    beforeUnmount(el) {
      const ctx = el.__qclosepopup;
      el.removeEventListener("click", ctx.handler);
      el.removeEventListener("keyup", ctx.handlerKey);
      delete el.__qclosepopup;
    }
  }
);
export { ClosePopup as C, PlaylistApi as P, PlaylistItemReadDtoFromJSON as a, PlaylistVisibility as b };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xvc2VQb3B1cC5mMjY4YmZiYi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYmFja2VuZC1zZXJ2aWNlLWFwaS9tb2RlbHMvUGxheWxpc3RWaXNpYmlsaXR5LnRzIiwiLi4vLi4vLi4vYmFja2VuZC1zZXJ2aWNlLWFwaS9tb2RlbHMvUGxheWxpc3RDcmVhdGVSZXF1ZXN0LnRzIiwiLi4vLi4vLi4vYmFja2VuZC1zZXJ2aWNlLWFwaS9tb2RlbHMvUGxheWxpc3RJdGVtUmVhZER0by50cyIsIi4uLy4uLy4uL2JhY2tlbmQtc2VydmljZS1hcGkvbW9kZWxzL1BsYXlsaXN0VHlwZS50cyIsIi4uLy4uLy4uL2JhY2tlbmQtc2VydmljZS1hcGkvbW9kZWxzL1BsYXlsaXN0UmVhZER0by50cyIsIi4uLy4uLy4uL2JhY2tlbmQtc2VydmljZS1hcGkvYXBpcy9QbGF5bGlzdEFwaS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2RpcmVjdGl2ZXMvQ2xvc2VQb3B1cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogTXVzaWNEYXRhU2VydmljZVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjBcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG5cbi8qKlxuICogXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBQbGF5bGlzdFZpc2liaWxpdHkgPSB7XG4gICAgUHVibGljOiAnUHVibGljJyxcbiAgICBQcml2YXRlOiAnUHJpdmF0ZScsXG4gICAgVW5saXN0ZWQ6ICdVbmxpc3RlZCdcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBQbGF5bGlzdFZpc2liaWxpdHkgPSB0eXBlb2YgUGxheWxpc3RWaXNpYmlsaXR5W2tleW9mIHR5cGVvZiBQbGF5bGlzdFZpc2liaWxpdHldO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdFZpc2liaWxpdHlGcm9tSlNPTihqc29uOiBhbnkpOiBQbGF5bGlzdFZpc2liaWxpdHkge1xuICAgIHJldHVybiBQbGF5bGlzdFZpc2liaWxpdHlGcm9tSlNPTlR5cGVkKGpzb24sIGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBsYXlsaXN0VmlzaWJpbGl0eUZyb21KU09OVHlwZWQoanNvbjogYW55LCBpZ25vcmVEaXNjcmltaW5hdG9yOiBib29sZWFuKTogUGxheWxpc3RWaXNpYmlsaXR5IHtcbiAgICByZXR1cm4ganNvbiBhcyBQbGF5bGlzdFZpc2liaWxpdHk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdFZpc2liaWxpdHlUb0pTT04odmFsdWU/OiBQbGF5bGlzdFZpc2liaWxpdHkgfCBudWxsKTogYW55IHtcbiAgICByZXR1cm4gdmFsdWUgYXMgYW55O1xufVxuXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogTXVzaWNEYXRhU2VydmljZVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjBcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG5pbXBvcnQgeyBleGlzdHMsIG1hcFZhbHVlcyB9IGZyb20gJy4uL3J1bnRpbWUnO1xuaW1wb3J0IHR5cGUgeyBQbGF5bGlzdFZpc2liaWxpdHkgfSBmcm9tICcuL1BsYXlsaXN0VmlzaWJpbGl0eSc7XG5pbXBvcnQge1xuICAgIFBsYXlsaXN0VmlzaWJpbGl0eUZyb21KU09OLFxuICAgIFBsYXlsaXN0VmlzaWJpbGl0eUZyb21KU09OVHlwZWQsXG4gICAgUGxheWxpc3RWaXNpYmlsaXR5VG9KU09OLFxufSBmcm9tICcuL1BsYXlsaXN0VmlzaWJpbGl0eSc7XG5cbi8qKlxuICogXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFBsYXlsaXN0Q3JlYXRlUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBsYXlsaXN0Q3JlYXRlUmVxdWVzdCB7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgUGxheWxpc3RDcmVhdGVSZXF1ZXN0XG4gICAgICovXG4gICAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge1BsYXlsaXN0VmlzaWJpbGl0eX1cbiAgICAgKiBAbWVtYmVyb2YgUGxheWxpc3RDcmVhdGVSZXF1ZXN0XG4gICAgICovXG4gICAgdmlzaWJpbGl0eT86IFBsYXlsaXN0VmlzaWJpbGl0eTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIGdpdmVuIG9iamVjdCBpbXBsZW1lbnRzIHRoZSBQbGF5bGlzdENyZWF0ZVJlcXVlc3QgaW50ZXJmYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFuY2VPZlBsYXlsaXN0Q3JlYXRlUmVxdWVzdCh2YWx1ZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgbGV0IGlzSW5zdGFuY2UgPSB0cnVlO1xuXG4gICAgcmV0dXJuIGlzSW5zdGFuY2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdENyZWF0ZVJlcXVlc3RGcm9tSlNPTihqc29uOiBhbnkpOiBQbGF5bGlzdENyZWF0ZVJlcXVlc3Qge1xuICAgIHJldHVybiBQbGF5bGlzdENyZWF0ZVJlcXVlc3RGcm9tSlNPTlR5cGVkKGpzb24sIGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBsYXlsaXN0Q3JlYXRlUmVxdWVzdEZyb21KU09OVHlwZWQoanNvbjogYW55LCBpZ25vcmVEaXNjcmltaW5hdG9yOiBib29sZWFuKTogUGxheWxpc3RDcmVhdGVSZXF1ZXN0IHtcbiAgICBpZiAoKGpzb24gPT09IHVuZGVmaW5lZCkgfHwgKGpzb24gPT09IG51bGwpKSB7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcbiAgICAgICAgJ25hbWUnOiAhZXhpc3RzKGpzb24sICduYW1lJykgPyB1bmRlZmluZWQgOiBqc29uWyduYW1lJ10sXG4gICAgICAgICd2aXNpYmlsaXR5JzogIWV4aXN0cyhqc29uLCAndmlzaWJpbGl0eScpID8gdW5kZWZpbmVkIDogUGxheWxpc3RWaXNpYmlsaXR5RnJvbUpTT04oanNvblsndmlzaWJpbGl0eSddKSxcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUGxheWxpc3RDcmVhdGVSZXF1ZXN0VG9KU09OKHZhbHVlPzogUGxheWxpc3RDcmVhdGVSZXF1ZXN0IHwgbnVsbCk6IGFueSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcbiAgICAgICAgJ25hbWUnOiB2YWx1ZS5uYW1lLFxuICAgICAgICAndmlzaWJpbGl0eSc6IFBsYXlsaXN0VmlzaWJpbGl0eVRvSlNPTih2YWx1ZS52aXNpYmlsaXR5KSxcbiAgICB9O1xufVxuXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogTXVzaWNEYXRhU2VydmljZVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjBcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG5pbXBvcnQgeyBleGlzdHMsIG1hcFZhbHVlcyB9IGZyb20gJy4uL3J1bnRpbWUnO1xuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUGxheWxpc3RJdGVtUmVhZER0b1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFBsYXlsaXN0SXRlbVJlYWREdG8ge1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG1lbWJlcm9mIFBsYXlsaXN0SXRlbVJlYWREdG9cbiAgICAgKi9cbiAgICB0cmFja0lkPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQG1lbWJlcm9mIFBsYXlsaXN0SXRlbVJlYWREdG9cbiAgICAgKi9cbiAgICBpbmRleD86IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJvZiBQbGF5bGlzdEl0ZW1SZWFkRHRvXG4gICAgICovXG4gICAgdGltZXNQbGF5ZWQ/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge0RhdGV9XG4gICAgICogQG1lbWJlcm9mIFBsYXlsaXN0SXRlbVJlYWREdG9cbiAgICAgKi9cbiAgICBkYXRlQWRkZWQ/OiBEYXRlO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZ2l2ZW4gb2JqZWN0IGltcGxlbWVudHMgdGhlIFBsYXlsaXN0SXRlbVJlYWREdG8gaW50ZXJmYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFuY2VPZlBsYXlsaXN0SXRlbVJlYWREdG8odmFsdWU6IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGxldCBpc0luc3RhbmNlID0gdHJ1ZTtcblxuICAgIHJldHVybiBpc0luc3RhbmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUGxheWxpc3RJdGVtUmVhZER0b0Zyb21KU09OKGpzb246IGFueSk6IFBsYXlsaXN0SXRlbVJlYWREdG8ge1xuICAgIHJldHVybiBQbGF5bGlzdEl0ZW1SZWFkRHRvRnJvbUpTT05UeXBlZChqc29uLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdEl0ZW1SZWFkRHRvRnJvbUpTT05UeXBlZChqc29uOiBhbnksIGlnbm9yZURpc2NyaW1pbmF0b3I6IGJvb2xlYW4pOiBQbGF5bGlzdEl0ZW1SZWFkRHRvIHtcbiAgICBpZiAoKGpzb24gPT09IHVuZGVmaW5lZCkgfHwgKGpzb24gPT09IG51bGwpKSB7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcbiAgICAgICAgJ3RyYWNrSWQnOiAhZXhpc3RzKGpzb24sICd0cmFja0lkJykgPyB1bmRlZmluZWQgOiBqc29uWyd0cmFja0lkJ10sXG4gICAgICAgICdpbmRleCc6ICFleGlzdHMoanNvbiwgJ2luZGV4JykgPyB1bmRlZmluZWQgOiBqc29uWydpbmRleCddLFxuICAgICAgICAndGltZXNQbGF5ZWQnOiAhZXhpc3RzKGpzb24sICd0aW1lc1BsYXllZCcpID8gdW5kZWZpbmVkIDoganNvblsndGltZXNQbGF5ZWQnXSxcbiAgICAgICAgJ2RhdGVBZGRlZCc6ICFleGlzdHMoanNvbiwgJ2RhdGVBZGRlZCcpID8gdW5kZWZpbmVkIDogKG5ldyBEYXRlKGpzb25bJ2RhdGVBZGRlZCddKSksXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBsYXlsaXN0SXRlbVJlYWREdG9Ub0pTT04odmFsdWU/OiBQbGF5bGlzdEl0ZW1SZWFkRHRvIHwgbnVsbCk6IGFueSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcbiAgICAgICAgJ3RyYWNrSWQnOiB2YWx1ZS50cmFja0lkLFxuICAgICAgICAnaW5kZXgnOiB2YWx1ZS5pbmRleCxcbiAgICAgICAgJ3RpbWVzUGxheWVkJzogdmFsdWUudGltZXNQbGF5ZWQsXG4gICAgICAgICdkYXRlQWRkZWQnOiB2YWx1ZS5kYXRlQWRkZWQgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6ICh2YWx1ZS5kYXRlQWRkZWQudG9JU09TdHJpbmcoKSksXG4gICAgfTtcbn1cblxuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE11c2ljRGF0YVNlcnZpY2VcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4wXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuXG4vKipcbiAqIFxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgUGxheWxpc3RUeXBlID0ge1xuICAgIE5vcm1hbDogJ05vcm1hbCcsXG4gICAgRmF2b3JpdGU6ICdGYXZvcml0ZScsXG4gICAgSGlzdG9yeTogJ0hpc3RvcnknLFxuICAgIFF1ZXVlOiAnUXVldWUnXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgUGxheWxpc3RUeXBlID0gdHlwZW9mIFBsYXlsaXN0VHlwZVtrZXlvZiB0eXBlb2YgUGxheWxpc3RUeXBlXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gUGxheWxpc3RUeXBlRnJvbUpTT04oanNvbjogYW55KTogUGxheWxpc3RUeXBlIHtcbiAgICByZXR1cm4gUGxheWxpc3RUeXBlRnJvbUpTT05UeXBlZChqc29uLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdFR5cGVGcm9tSlNPTlR5cGVkKGpzb246IGFueSwgaWdub3JlRGlzY3JpbWluYXRvcjogYm9vbGVhbik6IFBsYXlsaXN0VHlwZSB7XG4gICAgcmV0dXJuIGpzb24gYXMgUGxheWxpc3RUeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUGxheWxpc3RUeXBlVG9KU09OKHZhbHVlPzogUGxheWxpc3RUeXBlIHwgbnVsbCk6IGFueSB7XG4gICAgcmV0dXJuIHZhbHVlIGFzIGFueTtcbn1cblxuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE11c2ljRGF0YVNlcnZpY2VcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4wXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuaW1wb3J0IHsgZXhpc3RzLCBtYXBWYWx1ZXMgfSBmcm9tICcuLi9ydW50aW1lJztcbmltcG9ydCB0eXBlIHsgUGxheWxpc3RJdGVtUmVhZER0byB9IGZyb20gJy4vUGxheWxpc3RJdGVtUmVhZER0byc7XG5pbXBvcnQge1xuICAgIFBsYXlsaXN0SXRlbVJlYWREdG9Gcm9tSlNPTixcbiAgICBQbGF5bGlzdEl0ZW1SZWFkRHRvRnJvbUpTT05UeXBlZCxcbiAgICBQbGF5bGlzdEl0ZW1SZWFkRHRvVG9KU09OLFxufSBmcm9tICcuL1BsYXlsaXN0SXRlbVJlYWREdG8nO1xuaW1wb3J0IHR5cGUgeyBQbGF5bGlzdFR5cGUgfSBmcm9tICcuL1BsYXlsaXN0VHlwZSc7XG5pbXBvcnQge1xuICAgIFBsYXlsaXN0VHlwZUZyb21KU09OLFxuICAgIFBsYXlsaXN0VHlwZUZyb21KU09OVHlwZWQsXG4gICAgUGxheWxpc3RUeXBlVG9KU09OLFxufSBmcm9tICcuL1BsYXlsaXN0VHlwZSc7XG5pbXBvcnQgdHlwZSB7IFBsYXlsaXN0VmlzaWJpbGl0eSB9IGZyb20gJy4vUGxheWxpc3RWaXNpYmlsaXR5JztcbmltcG9ydCB7XG4gICAgUGxheWxpc3RWaXNpYmlsaXR5RnJvbUpTT04sXG4gICAgUGxheWxpc3RWaXNpYmlsaXR5RnJvbUpTT05UeXBlZCxcbiAgICBQbGF5bGlzdFZpc2liaWxpdHlUb0pTT04sXG59IGZyb20gJy4vUGxheWxpc3RWaXNpYmlsaXR5JztcblxuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUGxheWxpc3RSZWFkRHRvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGxheWxpc3RSZWFkRHRvIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBQbGF5bGlzdFJlYWREdG9cbiAgICAgKi9cbiAgICBpZD86IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBQbGF5bGlzdFJlYWREdG9cbiAgICAgKi9cbiAgICBuYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBQbGF5bGlzdFJlYWREdG9cbiAgICAgKi9cbiAgICB1c2VySWQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgUGxheWxpc3RSZWFkRHRvXG4gICAgICovXG4gICAgdXNlcm5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtQbGF5bGlzdFZpc2liaWxpdHl9XG4gICAgICogQG1lbWJlcm9mIFBsYXlsaXN0UmVhZER0b1xuICAgICAqL1xuICAgIHZpc2liaWxpdHk/OiBQbGF5bGlzdFZpc2liaWxpdHk7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge1BsYXlsaXN0VHlwZX1cbiAgICAgKiBAbWVtYmVyb2YgUGxheWxpc3RSZWFkRHRvXG4gICAgICovXG4gICAgdHlwZT86IFBsYXlsaXN0VHlwZTtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7RGF0ZX1cbiAgICAgKiBAbWVtYmVyb2YgUGxheWxpc3RSZWFkRHRvXG4gICAgICovXG4gICAgbGFzdE1vZGlmaWVkPzogRGF0ZTtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJvZiBQbGF5bGlzdFJlYWREdG9cbiAgICAgKi9cbiAgICBudW1iZXJPZlRyYWNrcz86IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7QXJyYXk8UGxheWxpc3RJdGVtUmVhZER0bz59XG4gICAgICogQG1lbWJlcm9mIFBsYXlsaXN0UmVhZER0b1xuICAgICAqL1xuICAgIHRyYWNrcz86IEFycmF5PFBsYXlsaXN0SXRlbVJlYWREdG8+IHwgbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIGdpdmVuIG9iamVjdCBpbXBsZW1lbnRzIHRoZSBQbGF5bGlzdFJlYWREdG8gaW50ZXJmYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFuY2VPZlBsYXlsaXN0UmVhZER0byh2YWx1ZTogb2JqZWN0KTogYm9vbGVhbiB7XG4gICAgbGV0IGlzSW5zdGFuY2UgPSB0cnVlO1xuXG4gICAgcmV0dXJuIGlzSW5zdGFuY2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdFJlYWREdG9Gcm9tSlNPTihqc29uOiBhbnkpOiBQbGF5bGlzdFJlYWREdG8ge1xuICAgIHJldHVybiBQbGF5bGlzdFJlYWREdG9Gcm9tSlNPTlR5cGVkKGpzb24sIGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBsYXlsaXN0UmVhZER0b0Zyb21KU09OVHlwZWQoanNvbjogYW55LCBpZ25vcmVEaXNjcmltaW5hdG9yOiBib29sZWFuKTogUGxheWxpc3RSZWFkRHRvIHtcbiAgICBpZiAoKGpzb24gPT09IHVuZGVmaW5lZCkgfHwgKGpzb24gPT09IG51bGwpKSB7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcbiAgICAgICAgJ2lkJzogIWV4aXN0cyhqc29uLCAnaWQnKSA/IHVuZGVmaW5lZCA6IGpzb25bJ2lkJ10sXG4gICAgICAgICduYW1lJzogIWV4aXN0cyhqc29uLCAnbmFtZScpID8gdW5kZWZpbmVkIDoganNvblsnbmFtZSddLFxuICAgICAgICAndXNlcklkJzogIWV4aXN0cyhqc29uLCAndXNlcklkJykgPyB1bmRlZmluZWQgOiBqc29uWyd1c2VySWQnXSxcbiAgICAgICAgJ3VzZXJuYW1lJzogIWV4aXN0cyhqc29uLCAndXNlcm5hbWUnKSA/IHVuZGVmaW5lZCA6IGpzb25bJ3VzZXJuYW1lJ10sXG4gICAgICAgICd2aXNpYmlsaXR5JzogIWV4aXN0cyhqc29uLCAndmlzaWJpbGl0eScpID8gdW5kZWZpbmVkIDogUGxheWxpc3RWaXNpYmlsaXR5RnJvbUpTT04oanNvblsndmlzaWJpbGl0eSddKSxcbiAgICAgICAgJ3R5cGUnOiAhZXhpc3RzKGpzb24sICd0eXBlJykgPyB1bmRlZmluZWQgOiBQbGF5bGlzdFR5cGVGcm9tSlNPTihqc29uWyd0eXBlJ10pLFxuICAgICAgICAnbGFzdE1vZGlmaWVkJzogIWV4aXN0cyhqc29uLCAnbGFzdE1vZGlmaWVkJykgPyB1bmRlZmluZWQgOiAobmV3IERhdGUoanNvblsnbGFzdE1vZGlmaWVkJ10pKSxcbiAgICAgICAgJ251bWJlck9mVHJhY2tzJzogIWV4aXN0cyhqc29uLCAnbnVtYmVyT2ZUcmFja3MnKSA/IHVuZGVmaW5lZCA6IGpzb25bJ251bWJlck9mVHJhY2tzJ10sXG4gICAgICAgICd0cmFja3MnOiAhZXhpc3RzKGpzb24sICd0cmFja3MnKSA/IHVuZGVmaW5lZCA6IChqc29uWyd0cmFja3MnXSA9PT0gbnVsbCA/IG51bGwgOiAoanNvblsndHJhY2tzJ10gYXMgQXJyYXk8YW55PikubWFwKFBsYXlsaXN0SXRlbVJlYWREdG9Gcm9tSlNPTikpLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF5bGlzdFJlYWREdG9Ub0pTT04odmFsdWU/OiBQbGF5bGlzdFJlYWREdG8gfCBudWxsKTogYW55IHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIFxuICAgICAgICAnaWQnOiB2YWx1ZS5pZCxcbiAgICAgICAgJ25hbWUnOiB2YWx1ZS5uYW1lLFxuICAgICAgICAndXNlcklkJzogdmFsdWUudXNlcklkLFxuICAgICAgICAndXNlcm5hbWUnOiB2YWx1ZS51c2VybmFtZSxcbiAgICAgICAgJ3Zpc2liaWxpdHknOiBQbGF5bGlzdFZpc2liaWxpdHlUb0pTT04odmFsdWUudmlzaWJpbGl0eSksXG4gICAgICAgICd0eXBlJzogUGxheWxpc3RUeXBlVG9KU09OKHZhbHVlLnR5cGUpLFxuICAgICAgICAnbGFzdE1vZGlmaWVkJzogdmFsdWUubGFzdE1vZGlmaWVkID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiAodmFsdWUubGFzdE1vZGlmaWVkLnRvSVNPU3RyaW5nKCkpLFxuICAgICAgICAnbnVtYmVyT2ZUcmFja3MnOiB2YWx1ZS5udW1iZXJPZlRyYWNrcyxcbiAgICAgICAgJ3RyYWNrcyc6IHZhbHVlLnRyYWNrcyA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogKHZhbHVlLnRyYWNrcyA9PT0gbnVsbCA/IG51bGwgOiAodmFsdWUudHJhY2tzIGFzIEFycmF5PGFueT4pLm1hcChQbGF5bGlzdEl0ZW1SZWFkRHRvVG9KU09OKSksXG4gICAgfTtcbn1cblxuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE11c2ljRGF0YVNlcnZpY2VcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4wXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuXG5pbXBvcnQgKiBhcyBydW50aW1lIGZyb20gJy4uL3J1bnRpbWUnO1xuaW1wb3J0IHR5cGUge1xuICBQbGF5bGlzdENyZWF0ZVJlcXVlc3QsXG4gIFBsYXlsaXN0UmVhZER0byxcbn0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCB7XG4gICAgUGxheWxpc3RDcmVhdGVSZXF1ZXN0RnJvbUpTT04sXG4gICAgUGxheWxpc3RDcmVhdGVSZXF1ZXN0VG9KU09OLFxuICAgIFBsYXlsaXN0UmVhZER0b0Zyb21KU09OLFxuICAgIFBsYXlsaXN0UmVhZER0b1RvSlNPTixcbn0gZnJvbSAnLi4vbW9kZWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVQbGF5bGlzdFJlcXVlc3Qge1xuICAgIHBsYXlsaXN0Q3JlYXRlUmVxdWVzdD86IFBsYXlsaXN0Q3JlYXRlUmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVQbGF5bGlzdFJlcXVlc3Qge1xuICAgIHBsYXlsaXN0SWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRQbGF5bGlzdFJlcXVlc3Qge1xuICAgIHBsYXlsaXN0SWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRVc2VyUGxheWxpc3RSZXF1ZXN0IHtcbiAgICB1c2VySWQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBcbiAqL1xuZXhwb3J0IGNsYXNzIFBsYXlsaXN0QXBpIGV4dGVuZHMgcnVudGltZS5CYXNlQVBJIHtcblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZVBsYXlsaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVQbGF5bGlzdFJlcXVlc3QsIGluaXRPdmVycmlkZXM/OiBSZXF1ZXN0SW5pdCB8IHJ1bnRpbWUuSW5pdE92ZXJyaWRlRnVuY3Rpb24pOiBQcm9taXNlPHJ1bnRpbWUuQXBpUmVzcG9uc2U8UGxheWxpc3RSZWFkRHRvPj4ge1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnM6IHJ1bnRpbWUuSFRUUEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uLXBhdGNoK2pzb24nO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSnd0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiBgL2FwaS9wbGF5bGlzdGAsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgYm9keTogUGxheWxpc3RDcmVhdGVSZXF1ZXN0VG9KU09OKHJlcXVlc3RQYXJhbWV0ZXJzLnBsYXlsaXN0Q3JlYXRlUmVxdWVzdCksXG4gICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgcnVudGltZS5KU09OQXBpUmVzcG9uc2UocmVzcG9uc2UsIChqc29uVmFsdWUpID0+IFBsYXlsaXN0UmVhZER0b0Zyb21KU09OKGpzb25WYWx1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZVBsYXlsaXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBDcmVhdGVQbGF5bGlzdFJlcXVlc3QgPSB7fSwgaW5pdE92ZXJyaWRlcz86IFJlcXVlc3RJbml0IHwgcnVudGltZS5Jbml0T3ZlcnJpZGVGdW5jdGlvbik6IFByb21pc2U8UGxheWxpc3RSZWFkRHRvPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jcmVhdGVQbGF5bGlzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS52YWx1ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZVBsYXlsaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVQbGF5bGlzdFJlcXVlc3QsIGluaXRPdmVycmlkZXM/OiBSZXF1ZXN0SW5pdCB8IHJ1bnRpbWUuSW5pdE92ZXJyaWRlRnVuY3Rpb24pOiBQcm9taXNlPHJ1bnRpbWUuQXBpUmVzcG9uc2U8Ym9vbGVhbj4+IHtcbiAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnBsYXlsaXN0SWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMucGxheWxpc3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgcnVudGltZS5SZXF1aXJlZEVycm9yKCdwbGF5bGlzdElkJywnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnBsYXlsaXN0SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQbGF5bGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG5cbiAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVyczogcnVudGltZS5IVFRQSGVhZGVycyA9IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSnd0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiBgL2FwaS9wbGF5bGlzdC97cGxheWxpc3RJZH1gLnJlcGxhY2UoYHske1wicGxheWxpc3RJZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnBsYXlsaXN0SWQpKSksXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgcnVudGltZS5UZXh0QXBpUmVzcG9uc2UocmVzcG9uc2UpIGFzIGFueTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGVQbGF5bGlzdChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlUGxheWxpc3RSZXF1ZXN0LCBpbml0T3ZlcnJpZGVzPzogUmVxdWVzdEluaXQgfCBydW50aW1lLkluaXRPdmVycmlkZUZ1bmN0aW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5kZWxldGVQbGF5bGlzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS52YWx1ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VyRmF2b3JpdGVSYXcoaW5pdE92ZXJyaWRlcz86IFJlcXVlc3RJbml0IHwgcnVudGltZS5Jbml0T3ZlcnJpZGVGdW5jdGlvbik6IFByb21pc2U8cnVudGltZS5BcGlSZXNwb25zZTxBcnJheTxQbGF5bGlzdFJlYWREdG8+Pj4ge1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnM6IHJ1bnRpbWUuSFRUUEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEp3dCBhdXRoZW50aWNhdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogYC9hcGkvcGxheWxpc3QvdXNlci9tZS9mYXZvcml0ZWAsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgcnVudGltZS5KU09OQXBpUmVzcG9uc2UocmVzcG9uc2UsIChqc29uVmFsdWUpID0+IGpzb25WYWx1ZS5tYXAoUGxheWxpc3RSZWFkRHRvRnJvbUpTT04pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKi9cbiAgICBhc3luYyBnZXRDdXJyZW50VXNlckZhdm9yaXRlKGluaXRPdmVycmlkZXM/OiBSZXF1ZXN0SW5pdCB8IHJ1bnRpbWUuSW5pdE92ZXJyaWRlRnVuY3Rpb24pOiBQcm9taXNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRVc2VyRmF2b3JpdGVSYXcoaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS52YWx1ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VySGlzdG9yeVJhdyhpbml0T3ZlcnJpZGVzPzogUmVxdWVzdEluaXQgfCBydW50aW1lLkluaXRPdmVycmlkZUZ1bmN0aW9uKTogUHJvbWlzZTxydW50aW1lLkFwaVJlc3BvbnNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG5cbiAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVyczogcnVudGltZS5IVFRQSGVhZGVycyA9IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSnd0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiBgL2FwaS9wbGF5bGlzdC91c2VyL21lL2hpc3RvcnlgLFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcblxuICAgICAgICByZXR1cm4gbmV3IHJ1bnRpbWUuSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlLCAoanNvblZhbHVlKSA9PiBqc29uVmFsdWUubWFwKFBsYXlsaXN0UmVhZER0b0Zyb21KU09OKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXJIaXN0b3J5KGluaXRPdmVycmlkZXM/OiBSZXF1ZXN0SW5pdCB8IHJ1bnRpbWUuSW5pdE92ZXJyaWRlRnVuY3Rpb24pOiBQcm9taXNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRVc2VySGlzdG9yeVJhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXJQbGF5bGlzdFJhdyhpbml0T3ZlcnJpZGVzPzogUmVxdWVzdEluaXQgfCBydW50aW1lLkluaXRPdmVycmlkZUZ1bmN0aW9uKTogUHJvbWlzZTxydW50aW1lLkFwaVJlc3BvbnNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG5cbiAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVyczogcnVudGltZS5IVFRQSGVhZGVycyA9IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSnd0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiBgL2FwaS9wbGF5bGlzdC91c2VyL21lYCxcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBydW50aW1lLkpTT05BcGlSZXNwb25zZShyZXNwb25zZSwgKGpzb25WYWx1ZSkgPT4ganNvblZhbHVlLm1hcChQbGF5bGlzdFJlYWREdG9Gcm9tSlNPTikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VyUGxheWxpc3QoaW5pdE92ZXJyaWRlcz86IFJlcXVlc3RJbml0IHwgcnVudGltZS5Jbml0T3ZlcnJpZGVGdW5jdGlvbik6IFByb21pc2U8QXJyYXk8UGxheWxpc3RSZWFkRHRvPj4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXJQbGF5bGlzdFJhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXJRdWV1ZVJhdyhpbml0T3ZlcnJpZGVzPzogUmVxdWVzdEluaXQgfCBydW50aW1lLkluaXRPdmVycmlkZUZ1bmN0aW9uKTogUHJvbWlzZTxydW50aW1lLkFwaVJlc3BvbnNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVyczogYW55ID0ge307XG5cbiAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVyczogcnVudGltZS5IVFRQSGVhZGVycyA9IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSnd0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiBgL2FwaS9wbGF5bGlzdC91c2VyL21lL3F1ZXVlYCxcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBydW50aW1lLkpTT05BcGlSZXNwb25zZShyZXNwb25zZSwgKGpzb25WYWx1ZSkgPT4ganNvblZhbHVlLm1hcChQbGF5bGlzdFJlYWREdG9Gcm9tSlNPTikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqL1xuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VyUXVldWUoaW5pdE92ZXJyaWRlcz86IFJlcXVlc3RJbml0IHwgcnVudGltZS5Jbml0T3ZlcnJpZGVGdW5jdGlvbik6IFByb21pc2U8QXJyYXk8UGxheWxpc3RSZWFkRHRvPj4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXJRdWV1ZVJhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UGxheWxpc3RSYXcocmVxdWVzdFBhcmFtZXRlcnM6IEdldFBsYXlsaXN0UmVxdWVzdCwgaW5pdE92ZXJyaWRlcz86IFJlcXVlc3RJbml0IHwgcnVudGltZS5Jbml0T3ZlcnJpZGVGdW5jdGlvbik6IFByb21pc2U8cnVudGltZS5BcGlSZXNwb25zZTxQbGF5bGlzdFJlYWREdG8+PiB7XG4gICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5wbGF5bGlzdElkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnBsYXlsaXN0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHJ1bnRpbWUuUmVxdWlyZWRFcnJvcigncGxheWxpc3RJZCcsJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5wbGF5bGlzdElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UGxheWxpc3QuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnM6IHJ1bnRpbWUuSFRUUEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEp3dCBhdXRoZW50aWNhdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogYC9hcGkvcGxheWxpc3Qve3BsYXlsaXN0SWR9YC5yZXBsYWNlKGB7JHtcInBsYXlsaXN0SWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5wbGF5bGlzdElkKSkpLFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcblxuICAgICAgICByZXR1cm4gbmV3IHJ1bnRpbWUuSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlLCAoanNvblZhbHVlKSA9PiBQbGF5bGlzdFJlYWREdG9Gcm9tSlNPTihqc29uVmFsdWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKi9cbiAgICBhc3luYyBnZXRQbGF5bGlzdChyZXF1ZXN0UGFyYW1ldGVyczogR2V0UGxheWxpc3RSZXF1ZXN0LCBpbml0T3ZlcnJpZGVzPzogUmVxdWVzdEluaXQgfCBydW50aW1lLkluaXRPdmVycmlkZUZ1bmN0aW9uKTogUHJvbWlzZTxQbGF5bGlzdFJlYWREdG8+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFBsYXlsaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VXNlclBsYXlsaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRVc2VyUGxheWxpc3RSZXF1ZXN0LCBpbml0T3ZlcnJpZGVzPzogUmVxdWVzdEluaXQgfCBydW50aW1lLkluaXRPdmVycmlkZUZ1bmN0aW9uKTogUHJvbWlzZTxydW50aW1lLkFwaVJlc3BvbnNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+PiB7XG4gICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXNlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBydW50aW1lLlJlcXVpcmVkRXJyb3IoJ3VzZXJJZCcsJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRVc2VyUGxheWxpc3QuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnM6IGFueSA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnM6IHJ1bnRpbWUuSFRUUEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEp3dCBhdXRoZW50aWNhdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogYC9hcGkvcGxheWxpc3QvdXNlci97dXNlcklkfWAucmVwbGFjZShgeyR7XCJ1c2VySWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQpKSksXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuXG4gICAgICAgIHJldHVybiBuZXcgcnVudGltZS5KU09OQXBpUmVzcG9uc2UocmVzcG9uc2UsIChqc29uVmFsdWUpID0+IGpzb25WYWx1ZS5tYXAoUGxheWxpc3RSZWFkRHRvRnJvbUpTT04pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKi9cbiAgICBhc3luYyBnZXRVc2VyUGxheWxpc3QocmVxdWVzdFBhcmFtZXRlcnM6IEdldFVzZXJQbGF5bGlzdFJlcXVlc3QsIGluaXRPdmVycmlkZXM/OiBSZXF1ZXN0SW5pdCB8IHJ1bnRpbWUuSW5pdE92ZXJyaWRlRnVuY3Rpb24pOiBQcm9taXNlPEFycmF5PFBsYXlsaXN0UmVhZER0bz4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFVzZXJQbGF5bGlzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS52YWx1ZSgpO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi4vdXRpbHMvcHJpdmF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBjbG9zZVBvcnRhbHMsIGdldFBvcnRhbFByb3h5IH0gZnJvbSAnLi4vdXRpbHMvcHJpdmF0ZS9wb3J0YWwuanMnXG5pbXBvcnQgeyBpc0tleUNvZGUgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL2tleS1jb21wb3NpdGlvbi5qcydcbmltcG9ydCBnZXRTU1JQcm9wcyBmcm9tICcuLi91dGlscy9wcml2YXRlL25vb3Atc3NyLWRpcmVjdGl2ZS10cmFuc2Zvcm0uanMnXG5cbi8qXG4gKiBkZXB0aFxuICogICA8IDAgIC0tPiBjbG9zZSBhbGwgY2hhaW5cbiAqICAgMCAgICAtLT4gZGlzYWJsZWRcbiAqICAgPiAwICAtLT4gY2xvc2UgY2hhaW4gdXAgdG8gTiBwYXJlbnRcbiAqL1xuXG5mdW5jdGlvbiBnZXREZXB0aCAodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgY29uc3QgZGVwdGggPSBwYXJzZUludCh2YWx1ZSwgMTApXG4gIHJldHVybiBpc05hTihkZXB0aCkgPyAwIDogZGVwdGhcbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRGlyZWN0aXZlKF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHsgbmFtZTogJ2Nsb3NlLXBvcHVwJywgZ2V0U1NSUHJvcHMgfVxuICA6IHtcbiAgICAgIG5hbWU6ICdjbG9zZS1wb3B1cCcsXG5cbiAgICAgIGJlZm9yZU1vdW50IChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICBkZXB0aDogZ2V0RGVwdGgodmFsdWUpLFxuXG4gICAgICAgICAgaGFuZGxlciAoZXZ0KSB7XG4gICAgICAgICAgICAvLyBhbGxvdyBAY2xpY2sgdG8gYmUgZW1pdHRlZFxuICAgICAgICAgICAgY3R4LmRlcHRoICE9PSAwICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcm94eSA9IGdldFBvcnRhbFByb3h5KGVsKVxuICAgICAgICAgICAgICBpZiAocHJveHkgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGNsb3NlUG9ydGFscyhwcm94eSwgZXZ0LCBjdHguZGVwdGgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGhhbmRsZXJLZXkgKGV2dCkge1xuICAgICAgICAgICAgaXNLZXlDb2RlKGV2dCwgMTMpID09PSB0cnVlICYmIGN0eC5oYW5kbGVyKGV2dClcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBlbC5fX3FjbG9zZXBvcHVwID0gY3R4XG5cbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjdHguaGFuZGxlcilcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBjdHguaGFuZGxlcktleSlcbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZWQgKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9KSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICBlbC5fX3FjbG9zZXBvcHVwLmRlcHRoID0gZ2V0RGVwdGgodmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGJlZm9yZVVubW91bnQgKGVsKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IGVsLl9fcWNsb3NlcG9wdXBcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjdHguaGFuZGxlcilcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBjdHguaGFuZGxlcktleSlcbiAgICAgICAgZGVsZXRlIGVsLl9fcWNsb3NlcG9wdXBcbiAgICAgIH1cbiAgICB9XG4pXG4iXSwibmFtZXMiOlsicnVudGltZS5CYXNlQVBJIiwicnVudGltZS5KU09OQXBpUmVzcG9uc2UiLCJydW50aW1lLlJlcXVpcmVkRXJyb3IiLCJydW50aW1lLlRleHRBcGlSZXNwb25zZSJdLCJtYXBwaW5ncyI6IjtBQW1CTyxNQUFNLHFCQUFxQjtBQUFBLEVBQzlCLFFBQVE7QUFBQSxFQUNSLFNBQVM7QUFBQSxFQUNULFVBQVU7QUFDZDtBQUlPLFNBQVMsMkJBQTJCLE1BQStCO0FBQy9ELFNBQUEsZ0NBQWdDLElBQVc7QUFDdEQ7QUFFZ0IsU0FBQSxnQ0FBZ0MsTUFBVyxxQkFBa0Q7QUFDbEcsU0FBQTtBQUNYO0FBRU8sU0FBUyx5QkFBeUIsT0FBd0M7QUFDdEUsU0FBQTtBQUNYO0FDNkJPLFNBQVMsNEJBQTRCLE9BQTJDO0FBQ25GLE1BQUksVUFBVSxRQUFXO0FBQ2QsV0FBQTtBQUFBLEVBQ1g7QUFDQSxNQUFJLFVBQVUsTUFBTTtBQUNULFdBQUE7QUFBQSxFQUNYO0FBQ08sU0FBQTtBQUFBLElBRUgsUUFBUSxNQUFNO0FBQUEsSUFDZCxjQUFjLHlCQUF5QixNQUFNLFVBQVU7QUFBQSxFQUFBO0FBRS9EO0FDdEJPLFNBQVMsNEJBQTRCLE1BQWdDO0FBQ2pFLFNBQUEsaUNBQWlDLElBQVc7QUFDdkQ7QUFFZ0IsU0FBQSxpQ0FB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
