import{Q as $}from"./QImg.40b13b04.js";import{a1 as I,ay as P,b0 as R,b1 as U,r as f,c as y,o as V,b2 as F,a3 as b,a4 as D,a5 as h,aj as q,a7 as s,d as r,a2 as O,a8 as n,aq as g,ab as p,l as j}from"./index.f6b0e315.js";import{Q as A}from"./QTable.be451506.js";import{Q as G}from"./QTd.dbf733a9.js";import{Q as K}from"./QPage.3b2df487.js";import{m as z,f as H}from"./durationUtils.75008d74.js";const J={key:0,class:"row full-width"},W={class:"col-4 q-px-md",style:{"max-width":"230px"}},X={class:"col-8"},Y={class:"row full-width full-height items-end"},Z={class:"col-12"},ee=s("div",{class:"text-body1"},"Album",-1),ae={class:"q-mb-sm-sm q-mb-none q-mt-md"},te={class:"col-12"},le={class:"row full-width"},se={class:"text-subtitle1 text-bold"},oe={key:0,class:"text-subtitle1"},ie={class:"text-subtitle1"},re={class:"text-subtitle1"},ue={class:"q-pa-md"},ne={class:"q-pa-md"},de={class:"my-table-details"},ce={class:"q-pa-md"},me=I({name:"AlbumPage"}),Ae=I({...me,setup(fe){const E=P(),M=new R(U),a=f(),c=f(),d=f([]),v=f([]),Q=y(()=>{var e,t,o,l;return((t=(e=a==null?void 0:a.value)==null?void 0:e.albumImage)==null?void 0:t.url)===null?"http://via.placeholder.com/640x360":(l=(o=a==null?void 0:a.value)==null?void 0:o.albumImage)==null?void 0:l.url});async function T(e){return M.getAlbum({id:e})}function C(e){const t=[],o=["releaseDate","releaseConvention","catalogNumber","numberOfDiscs","website","albumArtist","dataSource"],l=e;for(let u of o){const i=l[u];console.log(i),i&&t.push({name:u,value:i})}v.value=t}function L(){var e,t,o,l,u,i,w;(e=a.value)!=null&&e.albumImage&&((o=d.value)==null||o.push((t=a.value)==null?void 0:t.albumImage)),(l=a.value)!=null&&l.otherImages&&((i=d.value)==null||i.push(...(u=a.value)==null?void 0:u.otherImages)),(w=c.value)==null||w.forEach(m=>{var k;m.trackFile&&((k=d.value)==null||k.push(m==null?void 0:m.trackFile))})}async function x(){var t,o,l;c.value=[],a.value=void 0,d.value=[],v.value=[];const e=await T(E.currentRoute.value.params.albumId);a.value=e,(t=a.value)!=null&&t.tracks&&((o=a.value)==null||o.tracks.sort((u,i)=>u.index-i.index),console.log(a.value),c.value=(l=a.value)==null?void 0:l.tracks,L(),C(e))}V(async()=>{await x()}),F(async()=>{await x()});const N=[{name:"index",required:!0,label:"#",align:"center",field:e=>e.index,format:e=>`${e}`,style:"width: 100px",sortable:!0},{name:"title",required:!0,label:"TITLE",align:"left",field:e=>{var t;return(t=e.name)==null?void 0:t._default},format:e=>`${e}`,classes:"text-bold",sortable:!1},{name:"id",required:!0,label:"ID",align:"left",field:e=>e.id,format:e=>`${e}`,classes:"text-bold",sortable:!1},{name:"duration",required:!0,label:"DURATION",align:"right",field:e=>e.duration,format:e=>`${H(e)}`,classes:"text-bold",sortable:!1}],S=[{name:"id",required:!0,label:"ID",align:"left",field:e=>e,classes:"text-bold",sortable:!1},{name:"name",required:!0,label:"NAME",align:"left",field:e=>e.assetName,format:e=>`${e}`,classes:"text-bold",sortable:!1},{name:"mime",required:!0,label:"MIME",align:"left",field:e=>e.assetMime,format:e=>`${e}`,classes:"text-bold",sortable:!1},{name:"large",required:!0,label:"LARGE",align:"right",field:e=>e.large,format:e=>`${e}`,classes:"text-bold",sortable:!1}],B=[{name:"field",label:"FIELD",align:"left",field:e=>e.name},{name:"value",label:"VALUE",align:"left",field:e=>e.value}];y(()=>{var t,o;let e=[];return(o=(t=a.value)==null?void 0:t.tracks)==null||o.forEach(l=>{l.duration&&e.push(l.duration)}),z(e)});const _={rowsPerPage:0,descending:!0};return(e,t)=>(b(),D(K,{padding:""},{default:h(()=>{var o;return[a.value?(b(),q("div",J,[s("div",W,[r($,{src:O(Q),ratio:"1"},null,8,["src"])]),s("div",X,[s("div",Y,[s("div",Z,[ee,s("h3",ae,n(a.value.albumName._default),1)]),s("div",te,[s("div",le,[s("div",se,n(a.value.albumArtist[0]),1),a.value.releaseDate?(b(),D(g,{key:0,vertical:"",spaced:""})):p("",!0),s("div",null,[a.value.releaseDate?(b(),q("div",oe,n((o=a.value.releaseDate)==null?void 0:o.toLocaleDateString()),1)):p("",!0)]),r(g,{vertical:"",spaced:""}),s("div",ie,n(a.value.tracks.length)+" Tracks",1),r(g,{vertical:"",spaced:""}),s("div",re,n(a.value.id),1)])])])])])):p("",!0),s("div",ue,[r(A,{title:"ALBUM METADATA",rows:v.value,columns:B,"row-key":"field","virtual-scroll":"","hide-pagination":"",pagination:_},null,8,["rows"])]),s("div",ne,[r(A,{title:"ALBUM ASSETS",rows:d.value,columns:S,"row-key":"name","virtual-scroll":"","hide-pagination":"",pagination:_},{"body-cell-id":h(l=>[r(G,{props:l},{default:h(()=>[s("div",null,[r(j,{label:l.value.assetId,href:l.value.url,target:"_blank",unelevated:""},null,8,["label","href"])]),s("div",de,n(l.row.details),1)]),_:2},1032,["props"])]),_:1},8,["rows"])]),s("div",ce,[r(A,{title:"TRACKS",rows:c.value,columns:N,"row-key":"name","virtual-scroll":"","hide-pagination":"",pagination:_},null,8,["rows"])])]}),_:1}))}});export{Ae as default};
