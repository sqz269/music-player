import{h as i,j as L,as as R,at as U,r as g,c as z,w as v,aW as O,aX as W,p as Y,o as T,v as Z,k as X,t as G,aY as p,n as J,Z as N,aZ as A,Y as K,a_ as B,a$ as ee,g as te,a1 as P,ay as ae,R as le,au as se,a3 as b,a4 as y,a5 as h,a2 as x,ab as ne,d as M,a7 as _,a8 as E,a6 as ie,aa as oe,b0 as re,b1 as ue,a as ce,aj as de,ax as fe,F as me}from"./index.62bfa1d0.js";import{Q as ve}from"./QPage.1e3447a7.js";import{Q as ge}from"./QImg.c7b24997.js";const be=[i("circle",{cx:"15",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[i("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"105",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var he=L({name:"QSpinnerDots",props:R,setup(t){const{cSize:s,classes:r}=U(t);return()=>i("svg",{class:r.value,fill:"currentColor",width:s.value,height:s.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},be)}});const{passive:f}=G;var _e=L({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(t,{slots:s,emit:r}){const o=g(!1),a=g(!0),u=g(null);let c=t.initialIndex||0,e,n;const D=z(()=>"q-infinite-scroll__loading"+(o.value===!0?"":" invisible"));function m(){if(t.disable===!0||o.value===!0||a.value===!1)return;const l=p(e),d=N(e),I=B(e);t.reverse===!1?Math.round(d+I+t.offset)>=Math.round(l)&&C():Math.round(d)<=t.offset&&C()}function C(){if(t.disable===!0||o.value===!0||a.value===!1)return;c++,o.value=!0;const l=p(e);r("load",c,d=>{a.value===!0&&(o.value=!1,J(()=>{if(t.reverse===!0){const I=p(e),V=N(e),j=I-l;A(e,V+j)}d===!0?S():u.value&&u.value.closest("body")&&n()}))})}function H(){c=0}function Q(){a.value===!1&&(a.value=!0,e.addEventListener("scroll",n,f)),m()}function S(){a.value===!0&&(a.value=!1,o.value=!1,e.removeEventListener("scroll",n,f),n!==void 0&&n.cancel!==void 0&&n.cancel())}function k(){if(e&&a.value===!0&&e.removeEventListener("scroll",n,f),e=K(u.value,t.scrollTarget),a.value===!0){if(e.addEventListener("scroll",n,f),t.reverse===!0){const l=p(e),d=B(e);A(e,l-d)}m()}}function $(l){c=l}function q(l){l=parseInt(l,10);const d=n;n=l<=0?m:ee(m,isNaN(l)===!0?100:l),e&&a.value===!0&&(d!==void 0&&e.removeEventListener("scroll",d,f),e.addEventListener("scroll",n,f))}v(()=>t.disable,l=>{l===!0?S():Q()}),v(()=>t.reverse,l=>{o.value===!1&&a.value===!0&&m()}),v(()=>t.scrollTarget,k),v(()=>t.debounce,q);let w=!1;O(()=>{w!==!1&&e&&A(e,w)}),W(()=>{w=e?N(e):!1}),Y(()=>{a.value===!0&&e.removeEventListener("scroll",n,f)}),T(()=>{q(t.debounce),k()});const F=te();return Object.assign(F.proxy,{poll:()=>{n!==void 0&&n()},trigger:C,stop:S,reset:H,resume:Q,setIndex:$}),()=>{const l=Z(s.default,[]);return t.disable!==!0&&a.value===!0&&l[t.reverse===!1?"push":"unshift"](i("div",{class:D.value},X(s.loading))),i("div",{class:"q-infinite-scroll",ref:u},l)}}});const pe=_("div",{class:"q-focus-helper cursor-pointer relative-position"},null,-1),xe={class:"text-subtitle1"},ye={class:"text-subtitle2"},Ce={name:"AlbumCard"},Se=P({...Ce,props:{albumInfo:null},setup(t){const s=t,r=g(!1);v(r,()=>{console.log("hovering changed")});const o=ae();function a(){const u=s.albumInfo.id;o.push({name:"album",params:{albumId:u}})}return(u,c)=>le((b(),y(oe,{class:"album-card cursor-pointer",style:{width:"245px"},onClick:a},{default:h(()=>[pe,x(s).albumInfo.albumImage?(b(),y(ge,{key:0,src:x(s).albumInfo.albumImage.url,style:{width:"210px",height:"210px"},class:"q-mx-md q-mt-md","img-class":"rounded-borders",ratio:"1"},null,8,["src"])):ne("",!0),M(ie,null,{default:h(()=>[_("div",xe,E(x(s).albumInfo.albumName._default),1),_("div",ye,E(x(s).albumInfo.albumArtist[0].name),1)]),_:1})]),_:1})),[[se]])}}),we={class:"q-gutter-md row"},Ie={class:"row justify-center q-my-md"},Ne=P({}),Qe=P({...Ne,__name:"HomePage",setup(t){const s=new re(ue),r=g([]);function o(a,u){console.log(a),s.getAlbums({start:a*50,limit:50}).then(c=>{console.log("Fetched "+c.length+" items"),r.value.push(...c),u()})}return T(async()=>{console.log(`Fetch (Exist ${r.value.length})`),r.value.push(...await s.getAlbums({limit:50}))}),ce(()=>{console.log("Unmounted")}),(a,u)=>(b(),y(ve,{padding:""},{default:h(()=>[M(_e,{class:"row items-start q-gutter-md flex",onLoad:o,offset:300},{loading:h(()=>[_("div",Ie,[M(he,{color:"primary",size:"40px"})])]),default:h(()=>[_("div",we,[(b(!0),de(me,null,fe(r.value,(c,e)=>(b(),y(Se,{key:e,"album-info":c},null,8,["album-info"]))),128))])]),_:1})]),_:1}))}});export{Qe as default};
